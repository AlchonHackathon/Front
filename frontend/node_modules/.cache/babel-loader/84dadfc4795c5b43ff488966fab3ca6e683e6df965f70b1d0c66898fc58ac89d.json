{"ast":null,"code":"var _jsxFileName = \"/Users/fawwazhaziq/Downloads/SEProject-v3/SEProject/frontend/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { currentLinkAction } from '../actions';\nimport axios from 'axios';\nimport './styling/Login.css';\nimport ResetPasswordModal from './ResetPasswordModal';\nimport ErrorModal from './ErrorModal'; // Import ErrorModal\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = ({\n  currentLinkAction\n}) => {\n  _s();\n  const USER_URL = '/api/users';\n  const initialState = {\n    userId: '',\n    password: ''\n  };\n  const [cred, setCred] = useState(initialState);\n  const [error, setError] = useState(null);\n  const [isResetPasswordModalOpen, setIsResetPasswordModalOpen] = useState(false);\n  const [isErrorModalOpen, setIsErrorModalOpen] = useState(false); // Add state for ErrorModal\n  const navigate = useNavigate();\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCred(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(`${USER_URL}/login`, cred);\n      localStorage.setItem('token', response.data.token);\n      if (response.data.type === 'user') {\n        currentLinkAction('user-dashboard');\n        navigate('/user-dashboard');\n      } else if (response.data.type === 'admin') {\n        currentLinkAction('admin-dashboard');\n        navigate('/admin-dashboard');\n      }\n      setCred(initialState);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error logging in:', error);\n      setError('Failed to login: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message));\n      setIsErrorModalOpen(true); // Show ErrorModal\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Login-body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"login-h1\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"login-form\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"login-label login-left\",\n              htmlFor: \"userId\",\n              children: \"ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"userId\",\n              name: \"userId\",\n              placeholder: \"Username\",\n              value: cred.userId,\n              onChange: handleChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"login-label\",\n              htmlFor: \"password\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              id: \"password\",\n              name: \"password\",\n              placeholder: \"Password\",\n              value: cred.password,\n              onChange: handleChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-form-group-b\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              className: \"login-a\",\n              to: \"#\",\n              onClick: e => {\n                e.preventDefault();\n                setIsResetPasswordModalOpen(true);\n              },\n              children: \"Forgot Password?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"login-button\",\n            type: \"submit\",\n            children: \"Log In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"login-p\",\n              children: [\"New? \", /*#__PURE__*/_jsxDEV(Link, {\n                className: \"login-a\",\n                to: \"/signup\",\n                children: \"Create Account\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 51\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(ErrorModal, {\n          isOpen: isErrorModalOpen,\n          message: error,\n          onClose: () => setIsErrorModalOpen(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 23\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ResetPasswordModal, {\n      isOpen: isResetPasswordModalOpen,\n      onClose: () => setIsResetPasswordModalOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 7\n  }, this);\n};\n_s(Login, \"h0smRLSSO4vuIQoVYvvavvf4b/0=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nconst mapStateToProps = state => {\n  return {\n    currentLinkState: state.currentLinkState\n  };\n};\nexport default connect(mapStateToProps, {\n  currentLinkAction\n})(Login);\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Link","useNavigate","connect","currentLinkAction","axios","ResetPasswordModal","ErrorModal","jsxDEV","_jsxDEV","Login","_s","USER_URL","initialState","userId","password","cred","setCred","error","setError","isResetPasswordModalOpen","setIsResetPasswordModalOpen","isErrorModalOpen","setIsErrorModalOpen","navigate","handleChange","e","name","value","target","prevState","handleSubmit","preventDefault","response","post","localStorage","setItem","data","token","type","_error$response","_error$response$data","console","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","id","placeholder","onChange","required","to","onClick","isOpen","onClose","_c","mapStateToProps","state","currentLinkState","$RefreshReg$"],"sources":["/Users/fawwazhaziq/Downloads/SEProject-v3/SEProject/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { currentLinkAction } from '../actions';\nimport axios from 'axios';\nimport './styling/Login.css';\nimport ResetPasswordModal from './ResetPasswordModal';\nimport ErrorModal from './ErrorModal'; // Import ErrorModal\n\nconst Login = ({ currentLinkAction }) => {\n\n  const USER_URL = '/api/users';\n  \n  const initialState = {\n    userId: '',\n    password: '',\n  };\n\n  const [cred, setCred] = useState(initialState);\n  const [error, setError] = useState(null);\n  const [isResetPasswordModalOpen, setIsResetPasswordModalOpen] = useState(false);\n  const [isErrorModalOpen, setIsErrorModalOpen] = useState(false); // Add state for ErrorModal\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setCred(prevState => ({\n      ...prevState, [name]: value\n    }));\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const response = await axios.post(`${USER_URL}/login`, cred);\n\n      localStorage.setItem('token', response.data.token);\n      if (response.data.type === 'user') {\n        currentLinkAction('user-dashboard');\n        navigate('/user-dashboard');\n\n      } else if (response.data.type === 'admin') {\n        currentLinkAction('admin-dashboard');\n        navigate('/admin-dashboard');\n      }\n      \n      setCred(initialState);\n\n    } catch (error) {\n      console.error('Error logging in:', error);\n      setError('Failed to login: ' + (error.response?.data?.message || error.message));\n      setIsErrorModalOpen(true); // Show ErrorModal\n    }\n  }\n\n  return (\n      <div className='Login-wrapper'>\n        <div className='Login-body'>\n          <div className=\"login-container\">\n            <h1 className='login-h1'>Login</h1>\n            <form className='login-form' onSubmit={handleSubmit}>\n              <div className=\"login-form-group\">\n                <label className='login-label login-left' htmlFor=\"userId\">ID</label>\n                <input\n                  type=\"text\"\n                  id=\"userId\"\n                  name=\"userId\"\n                  placeholder=\"Username\"\n                  value={cred.userId}\n                  onChange={handleChange}\n                  required\n                />\n              </div>\n              <div className=\"login-form-group\">\n                <label className='login-label' htmlFor=\"password\">Password</label>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  name=\"password\"\n                  placeholder=\"Password\"\n                  value={cred.password}\n                  onChange={handleChange}\n                  required\n                />\n              </div>\n              <div className=\"login-form-group-b\">\n                <Link className='login-a' to=\"#\" onClick={(e) => {\n                e.preventDefault();\n                setIsResetPasswordModalOpen(true);\n              }}>Forgot Password?</Link>             \n              </div>\n              <button className='login-button' type=\"submit\">Log In</button>\n              <center><p className='login-p'>New? <Link className='login-a' to=\"/signup\">Create Account</Link></p></center>\n            </form>\n            {error && <ErrorModal isOpen={isErrorModalOpen} message={error} onClose={() => setIsErrorModalOpen(false)} />} {/* Use ErrorModal */}\n          </div>\n        </div>\n        <ResetPasswordModal \n          isOpen={isResetPasswordModalOpen} \n          onClose={() => setIsResetPasswordModalOpen(false)} \n        />\n      </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return { currentLinkState: state.currentLinkState }\n}\n\nexport default connect(mapStateToProps, { currentLinkAction })(Login);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}