{"ast":null,"code":"var _jsxFileName = \"/Users/fawwazhaziq/Downloads/SEProject-v3/SEProject/frontend/src/components/StudentApplicationList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport user from '../icons/person.png';\nimport './styling/StudentApplicationList.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentApplicationList = () => {\n  _s();\n  const token = localStorage.getItem('token');\n  const headers = {};\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n  const APP_URL = '/api/applications';\n  const USER_URL = '/api/users';\n  const LAB_URL = '/api/labs';\n  const FILE_URL = '/api/uploads';\n  const [apps, setApps] = useState([]);\n  const [profs, setProfs] = useState([]);\n  const [labs, setLabs] = useState([]);\n  useEffect(() => {\n    const controller = new AbortController();\n    const fetchProfs = async () => {\n      try {\n        const response = await axios.get(`${USER_URL}/all`, {\n          signal: controller.signal,\n          headers: headers\n        });\n        const profs = response.data.users.filter(user => user.type === 'professor');\n        const profWithPictures = await Promise.all(profs.map(async prof => {\n          let newProfilePic = null;\n          if (prof.profile_pic) {\n            const pictureResponse = await axios.get(`${FILE_URL}/pictures/${prof.profile_pic}`, {\n              signal: controller.signal,\n              headers: headers\n            });\n            newProfilePic = pictureResponse.data.picture;\n          }\n          return {\n            ...prof,\n            profile_pic: newProfilePic\n          };\n        }));\n        setProfs(profWithPictures);\n      } catch (error) {\n        console.error('Error fetching all labs:', error);\n      }\n    };\n    const fetchApps = async () => {\n      try {\n        const response = await axios.get(`${APP_URL}`, {\n          signal: controller.signal,\n          headers: headers\n        });\n        setApps(response.data.applications);\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          console.error(`Fetch application count request cancelled`);\n        } else {\n          console.error(`Error getting application count:`, error);\n        }\n      }\n    };\n    const fetchLabs = async () => {\n      try {\n        const response = await axios.get(`${LAB_URL}`, {\n          signal: controller.signal,\n          headers: headers\n        });\n        setLabs(response.data.labs);\n        console.log(response.data.labs);\n      } catch (error) {\n        console.error('Error fetching all labs:', error);\n      }\n    };\n    fetchProfs();\n    fetchApps();\n    fetchLabs();\n    return () => {\n      controller.abort();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sal-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"sal-h1\",\n      children: \"Applications List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), apps.length > 0 ? apps.map(app => {\n      var _labs$filter$, _labs$filter$2, _profs$filter$;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `section ${app.status.toLowerCase()}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sal-application\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"icon-professor\",\n            src: profs.filter(prof => prof.userId === app.profId)[0].profile_pic || user,\n            alt: \"profile pic of professor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"details\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: ((_labs$filter$ = labs.filter(lab => lab._id === app.labId)[0]) === null || _labs$filter$ === void 0 ? void 0 : _labs$filter$.major) || 'Major'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: ((_labs$filter$2 = labs.filter(lab => lab._id === app.labId)[0]) === null || _labs$filter$2 === void 0 ? void 0 : _labs$filter$2.name) || 'Lab Name'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"em\", {\n                children: ((_profs$filter$ = profs.filter(prof => prof.userId === app.profId)[0]) === null || _profs$filter$ === void 0 ? void 0 : _profs$filter$.name) || 'Professor Name'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: app.status.toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 15\n      }, this);\n    }) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"You have not applied to any labs yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentApplicationList, \"Bqqh3mR7tzAeOMO9Uroj2ep1z6s=\");\n_c = StudentApplicationList;\nexport default StudentApplicationList;\nvar _c;\n$RefreshReg$(_c, \"StudentApplicationList\");","map":{"version":3,"names":["React","useState","useEffect","axios","user","jsxDEV","_jsxDEV","StudentApplicationList","_s","token","localStorage","getItem","headers","APP_URL","USER_URL","LAB_URL","FILE_URL","apps","setApps","profs","setProfs","labs","setLabs","controller","AbortController","fetchProfs","response","get","signal","data","users","filter","type","profWithPictures","Promise","all","map","prof","newProfilePic","profile_pic","pictureResponse","picture","error","console","fetchApps","applications","isCancel","fetchLabs","log","abort","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","app","_labs$filter$","_labs$filter$2","_profs$filter$","status","toLowerCase","src","userId","profId","alt","lab","_id","labId","major","name","toUpperCase","_c","$RefreshReg$"],"sources":["/Users/fawwazhaziq/Downloads/SEProject-v3/SEProject/frontend/src/components/StudentApplicationList.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport axios from 'axios';\nimport user from '../icons/person.png';\n\nimport './styling/StudentApplicationList.css';\n\nconst StudentApplicationList = () => {\n  const token = localStorage.getItem('token');\n\n  const headers = {};\n  if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  const APP_URL = '/api/applications';\n  const USER_URL = '/api/users';\n  const LAB_URL = '/api/labs';\n  const FILE_URL = '/api/uploads';\n  const [apps, setApps] = useState([]);\n  const [profs, setProfs] = useState([]);\n  const [labs, setLabs] = useState([]);\n\n  useEffect(() => {\n    const controller = new AbortController();\n\n    const fetchProfs = async () => {\n      try {\n        const response = await axios.get(`${USER_URL}/all`, {\n          signal: controller.signal,\n          headers: headers,\n        });\n        const profs = response.data.users.filter(user => user.type === 'professor');\n\n        const profWithPictures = await Promise.all(\n          profs.map(async prof => {\n            let newProfilePic = null;\n\n            if (prof.profile_pic) {\n              const pictureResponse = await axios.get(`${FILE_URL}/pictures/${prof.profile_pic}`, {\n                signal: controller.signal,\n                headers: headers,\n              });\n              newProfilePic = pictureResponse.data.picture;\n            }\n            return {\n              ...prof,\n              profile_pic: newProfilePic,\n            };\n          })\n        );\n\n        setProfs(profWithPictures);\n      } catch (error) {\n        console.error('Error fetching all labs:', error);\n      }\n    }\n\n    const fetchApps = async () => {\n      try {\n        const response = await axios.get(`${APP_URL}`, {\n            signal: controller.signal,\n            headers: headers,\n        });\n        setApps(response.data.applications);\n      } catch (error) {\n          if (axios.isCancel(error)) {\n              console.error(`Fetch application count request cancelled`);\n          }\n          else {\n              console.error(`Error getting application count:` , error);\n          }\n      }\n    }\n\n    const fetchLabs = async () => {\n      try {\n        const response = await axios.get(`${LAB_URL}`, {\n          signal: controller.signal,\n          headers: headers,\n        });\n        setLabs(response.data.labs);\n        console.log(response.data.labs);\n      } catch (error) {\n        console.error('Error fetching all labs:', error);\n      }\n    };\n\n    fetchProfs();\n    fetchApps();\n    fetchLabs();\n\n    return () => {\n      controller.abort();\n    };\n  }, []);\n  \n  return (\n    <div className=\"sal-container\">\n      <h1 className=\"sal-h1\">Applications List</h1>\n      {\n        apps.length > 0 ? (\n          apps.map(app => {\n            return(\n              <div className={`section ${app.status.toLowerCase()}`}>\n                <div className=\"sal-application\">\n                  <img \n                    className=\"icon-professor\"\n                    src={\n                      profs.filter(prof => prof.userId === app.profId)[0].profile_pic || user\n                    } \n                    alt='profile pic of professor'></img>\n                  <div className=\"details\">\n                    <div>\n                      <span>{\n                        labs.filter(lab => lab._id === app.labId)[0]?.major || 'Major'\n                      }</span>\n                      <strong>{\n                        labs.filter(lab => lab._id === app.labId)[0]?.name || 'Lab Name'\n                      }</strong>\n                      <em>{\n                        profs.filter(prof => prof.userId === app.profId)[0]?.name || 'Professor Name'\n                      }</em>\n                    </div>\n                    <h2>{app.status.toUpperCase()}</h2>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          <h3>You have not applied to any labs yet.</h3>\n        )\n      }\n      {/* <div className=\"section accepted\">\n        <div className=\"sal-application\">\n          <div\n            className=\"icon-professor\"\n            style={{ backgroundImage: `url('path/to/kendrick-lamar-photo.jpg')` }}\n          ></div>\n          <div className=\"details\">\n            <div>\n                <span>Mathematics</span>\n                <strong>Graph Theory</strong>\n                <em>Prof. Kendrick Lamar</em>\n            </div>\n            <h2>ACCEPTED</h2>\n          </div>\n        </div>\n      </div>\n      <div className=\"section rejected\">\n        <div className=\"sal-application\">\n          <div\n            className=\"icon-professor\"\n            style={{ backgroundImage: `url('path/to/future-photo.jpg')` }}\n          ></div>\n          <div className=\"details\">\n            <div>\n                <span>Music</span>\n                <strong>Like That</strong>\n                <em>Prof. Future</em>\n            </div>\n            <h2>REJECTED</h2>\n          </div>\n        </div>\n      </div> */}\n    </div>\n  );\n};\n\nexport default StudentApplicationList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}